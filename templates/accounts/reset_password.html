{% extends 'base.html' %}
{% load static %}

{% block title %}Đặt lại mật khẩu - JobFAST{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/accounts.css' %}">
{% endblock %}

{% block content %}
<div class="auth-container">
    <div class="auth-card">
        <div class="auth-title">
            <div class="icon"><i class="fa-solid fa-lock"></i></div>
            <h2>Đặt mật khẩu mới</h2>
            <p>Tạo mật khẩu mới cho tài khoản của bạn.</p>
        </div>

        <div class="success-box">
            <i class="fa-solid fa-circle-check"></i> Xác thực thành công! Vui lòng tạo mật khẩu mới.
        </div>

        <form method="POST" class="auth-form">
            {% csrf_token %}

            <div class="form-group">
                <label for="password">Mật khẩu mới</label>
                <input 
                    type="password" 
                    id="password" 
                    name="password" 
                    placeholder="••••••••"
                    minlength="6"
                    required
                    autofocus
                >
                <div class="password-strength">
                    <div class="password-strength-bar" id="strengthBar"></div>
                </div>
                <p class="password-hint">Mật khẩu phải có ít nhất 6 ký tự</p>
            </div>

            <div class="form-group">
                <label for="confirm_password">Xác nhận mật khẩu</label>
                <input 
                    type="password" 
                    id="confirm_password" 
                    name="confirm_password" 
                    placeholder="••••••••"
                    minlength="6"
                    required
                >
            </div>

            <button type="submit" class="btn-submit">Đổi mật khẩu</button>
        </form>

        <div class="auth-footer">
            <a href="{% url 'accounts:login' %}">← Quay lại đăng nhập</a>
        </div>
    </div>
</div>

<script>
    document.getElementById('password').addEventListener('input', function(e) {
        const password = e.target.value;
        const bar = document.getElementById('strengthBar');
        
        bar.className = 'password-strength-bar';
        
        if (password.length === 0) {
            bar.style.width = '0';
        } else if (password.length < 6) {
            bar.classList.add('weak');
        } else if (password.length < 10 || !/[A-Z]/.test(password) || !/[0-9]/.test(password)) {
            bar.classList.add('medium');
        } else {
            bar.classList.add('strong');
        }
    });

    document.getElementById('confirm_password').addEventListener('input', function(e) {
        const password = document.getElementById('password').value;
        const confirm = e.target.value;
        
        if (confirm !== password) {
            e.target.style.borderColor = '#f44336';
        } else {
            e.target.style.borderColor = '#4caf50';
        }
    });
</script>
{% endblock %}
